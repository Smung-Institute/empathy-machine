parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"mh6I":[function(require,module,exports) {
function t(t,e){this.times=t||[],this.values=e||[]}function e(){this.position=new THREE.Vector3,this.velocity=new THREE.Vector3,this.acceleration=new THREE.Vector3,this.angle=0,this.angleVelocity=0,this.angleAcceleration=0,this.size=16,this.color=new THREE.Color,this.opacity=1,this.age=0,this.alive=0}particleVertexShader=["attribute vec3  customColor;","attribute float customOpacity;","attribute float customSize;","attribute float customAngle;","attribute float customVisible;","varying vec4  vColor;","varying float vAngle;","void main()","{","if ( customVisible > 0.5 )","vColor = vec4( customColor, customOpacity );","else","vColor = vec4(0.0, 0.0, 0.0, 0.0);","vAngle = customAngle;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_PointSize = customSize * ( 300.0 / length( mvPosition.xyz ) );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),particleFragmentShader=["uniform sampler2D texture;","varying vec4 vColor;","varying float vAngle;","void main()","{","gl_FragColor = vColor;","float c = cos(vAngle);","float s = sin(vAngle);","vec2 rotatedUV = vec2(c * (gl_PointCoord.x - 0.5) + s * (gl_PointCoord.y - 0.5) + 0.5,","c * (gl_PointCoord.y - 0.5) - s * (gl_PointCoord.x - 0.5) + 0.5);","vec4 rotatedTexture = texture2D( texture,  rotatedUV );","gl_FragColor = gl_FragColor * rotatedTexture;","}"].join("\n"),t.prototype.lerp=function(t){for(var e=0,i=this.times.length;e<i&&t>this.times[e];)e++;if(0==e)return this.values[0];if(e==i)return this.values[i-1];var a=(t-this.times[e-1])/(this.times[e]-this.times[e-1]);return this.values[0]instanceof THREE.Vector3?this.values[e-1].clone().lerp(this.values[e],a):this.values[e-1]+a*(this.values[e]-this.values[e-1])},e.prototype.update=function(t){if(this.position.add(this.velocity.clone().multiplyScalar(t)),this.velocity.add(this.acceleration.clone().multiplyScalar(t)),this.angle+=.01745329251*this.angleVelocity*t,this.angleVelocity+=.01745329251*this.angleAcceleration*t,this.age+=t,this.sizeTween.times.length>0&&(this.size=this.sizeTween.lerp(this.age)),this.colorTween.times.length>0){var e=this.colorTween.lerp(this.age);this.color=(new THREE.Color).setHSL(e.x,e.y,e.z)}this.opacityTween.times.length>0&&(this.opacity=this.opacityTween.lerp(this.age))};var i=Object.freeze({CUBE:1,SPHERE:2});function a(){this.positionStyle=i.CUBE,this.positionBase=new THREE.Vector3,this.positionSpread=new THREE.Vector3,this.positionRadius=0,this.velocityStyle=i.CUBE,this.velocityBase=new THREE.Vector3,this.velocitySpread=new THREE.Vector3,this.speedBase=0,this.speedSpread=0,this.accelerationBase=new THREE.Vector3,this.accelerationSpread=new THREE.Vector3,this.angleBase=0,this.angleSpread=0,this.angleVelocityBase=0,this.angleVelocitySpread=0,this.angleAccelerationBase=0,this.angleAccelerationSpread=0,this.sizeBase=0,this.sizeSpread=0,this.sizeTween=new t,this.colorBase=new THREE.Vector3(0,1,.5),this.colorSpread=new THREE.Vector3(0,0,0),this.colorTween=new t,this.opacityBase=1,this.opacitySpread=0,this.opacityTween=new t,this.blendStyle=THREE.NormalBlending,this.particleArray=[],this.particlesPerSecond=100,this.particleDeathAge=1,this.emitterAge=0,this.emitterAlive=!0,this.emitterDeathAge=60,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.emitterDeathAge),this.particleGeometry=new THREE.Geometry,this.particleTexture=null,this.particleMaterial=new THREE.ShaderMaterial({uniforms:{texture:{type:"t",value:this.particleTexture}},attributes:{customVisible:{type:"f",value:[]},customAngle:{type:"f",value:[]},customSize:{type:"f",value:[]},customColor:{type:"c",value:[]},customOpacity:{type:"f",value:[]}},vertexShader:particleVertexShader,fragmentShader:particleFragmentShader,transparent:!0,blending:THREE.NormalBlending,depthTest:!0}),this.particleMesh=new THREE.Mesh}a.prototype.setValues=function(i){if(void 0!==i){for(var a in this.sizeTween=new t,this.colorTween=new t,this.opacityTween=new t,i)this[a]=i[a];e.prototype.sizeTween=this.sizeTween,e.prototype.colorTween=this.colorTween,e.prototype.opacityTween=this.opacityTween,this.particleArray=[],this.emitterAge=0,this.emitterAlive=!0,this.particleCount=this.particlesPerSecond*Math.min(this.particleDeathAge,this.emitterDeathAge),this.particleGeometry=new THREE.Geometry,this.particleMaterial=new THREE.ShaderMaterial({uniforms:{texture:{type:"t",value:this.particleTexture}},attributes:{customVisible:{type:"f",value:[]},customAngle:{type:"f",value:[]},customSize:{type:"f",value:[]},customColor:{type:"c",value:[]},customOpacity:{type:"f",value:[]}},vertexShader:particleVertexShader,fragmentShader:particleFragmentShader,transparent:!0,alphaTest:.5,blending:THREE.NormalBlending,depthTest:!0}),this.particleMesh=new THREE.ParticleSystem}},a.prototype.randomValue=function(t,e){return t+e*(Math.random()-.5)},a.prototype.randomVector3=function(t,e){var i=new THREE.Vector3(Math.random()-.5,Math.random()-.5,Math.random()-.5);return(new THREE.Vector3).addVectors(t,(new THREE.Vector3).multiplyVectors(e,i))},a.prototype.createParticle=function(){var t=new e;if(this.positionStyle==i.CUBE&&(t.position=this.randomVector3(this.positionBase,this.positionSpread)),this.positionStyle==i.SPHERE){var a=2*Math.random()-1,r=6.2832*Math.random(),s=Math.sqrt(1-a*a),o=new THREE.Vector3(s*Math.cos(r),s*Math.sin(r),a);t.position=(new THREE.Vector3).addVectors(this.positionBase,o.multiplyScalar(this.positionRadius))}if(this.velocityStyle==i.CUBE&&(t.velocity=this.randomVector3(this.velocityBase,this.velocitySpread)),this.velocityStyle==i.SPHERE){var l=(new THREE.Vector3).subVectors(t.position,this.positionBase),c=this.randomValue(this.speedBase,this.speedSpread);t.velocity=l.normalize().multiplyScalar(c)}t.acceleration=this.randomVector3(this.accelerationBase,this.accelerationSpread),t.angle=this.randomValue(this.angleBase,this.angleSpread),t.angleVelocity=this.randomValue(this.angleVelocityBase,this.angleVelocitySpread),t.angleAcceleration=this.randomValue(this.angleAccelerationBase,this.angleAccelerationSpread),t.size=this.randomValue(this.sizeBase,this.sizeSpread);var h=this.randomVector3(this.colorBase,this.colorSpread);return t.color=(new THREE.Color).setHSL(h.x,h.y,h.z),t.opacity=this.randomValue(this.opacityBase,this.opacitySpread),t.age=0,t.alive=0,t},a.prototype.initialize=function(){for(var t=0;t<this.particleCount;t++)this.particleArray[t]=this.createParticle(),this.particleGeometry.vertices[t]=this.particleArray[t].position,this.particleMaterial.attributes.customVisible.value[t]=this.particleArray[t].alive,this.particleMaterial.attributes.customColor.value[t]=this.particleArray[t].color,this.particleMaterial.attributes.customOpacity.value[t]=this.particleArray[t].opacity,this.particleMaterial.attributes.customSize.value[t]=this.particleArray[t].size,this.particleMaterial.attributes.customAngle.value[t]=this.particleArray[t].angle;this.particleMaterial.blending=this.blendStyle,this.blendStyle!=THREE.NormalBlending&&(this.particleMaterial.depthTest=!1),this.particleMesh=new THREE.ParticleSystem(this.particleGeometry,this.particleMaterial),this.particleMesh.dynamic=!0,this.particleMesh.sortParticles=!0,scene.add(this.particleMesh)},a.prototype.update=function(t){for(var e=[],i=0;i<this.particleCount;i++)this.particleArray[i].alive&&(this.particleArray[i].update(t),this.particleArray[i].age>this.particleDeathAge&&(this.particleArray[i].alive=0,e.push(i)),this.particleMaterial.attributes.customVisible.value[i]=this.particleArray[i].alive,this.particleMaterial.attributes.customColor.value[i]=this.particleArray[i].color,this.particleMaterial.attributes.customOpacity.value[i]=this.particleArray[i].opacity,this.particleMaterial.attributes.customSize.value[i]=this.particleArray[i].size,this.particleMaterial.attributes.customAngle.value[i]=this.particleArray[i].angle);if(this.emitterAlive){if(this.emitterAge<this.particleDeathAge){var a=Math.round(this.particlesPerSecond*(this.emitterAge+0)),r=Math.round(this.particlesPerSecond*(this.emitterAge+t));r>this.particleCount&&(r=this.particleCount);for(i=a;i<r;i++)this.particleArray[i].alive=1}for(var s=0;s<e.length;s++){i=e[s];this.particleArray[i]=this.createParticle(),this.particleArray[i].alive=1,this.particleGeometry.vertices[i]=this.particleArray[i].position}this.emitterAge+=t,this.emitterAge>this.emitterDeathAge&&(this.emitterAlive=!1)}},a.prototype.destroy=function(){scene.remove(this.particleMesh)};
},{}]},{},["mh6I"], null)
//# sourceMappingURL=particles.3d2dec65.js.map